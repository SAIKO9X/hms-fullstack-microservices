version: '3.8'

services:
  # --- Banco de Dados para o User Service ---
  mysql-user:
    image: mysql:8.0
    container_name: ms-user-db
    environment:
      MYSQL_DATABASE: ms_user_db
      MYSQL_USER: mysql_user
      MYSQL_PASSWORD: mysql_password
      MYSQL_ROOT_PASSWORD: root_password
    ports:
      - "3307:3306"
    volumes:
      - user-mysql-data:/var/lib/mysql
    restart: always

  # --- Banco de Dados para o Profile Service ---
  mysql-profile:
    image: mysql:8.0
    container_name: ms-profile-db
    environment:
      MYSQL_DATABASE: ms_profile_db
      MYSQL_USER: mysql_profile_user
      MYSQL_PASSWORD: mysql_profile_password
      MYSQL_ROOT_PASSWORD: root_password_profile
    ports:
      - "3308:3306"
    volumes:
      - profile-mysql-data:/var/lib/mysql
    restart: always

  # --- Banco de Dados para o Appointment Service ---
  mysql-appointment:
    image: mysql:8.0
    container_name: ms-appointment-db
    environment:
      MYSQL_DATABASE: ms_appointment_db
      MYSQL_USER: mysql_appointment_user
      MYSQL_PASSWORD: mysql_appointment_password
      MYSQL_ROOT_PASSWORD: root_password_appointment
    ports:
      - "3309:3306"
    volumes:
      - appointment-mysql-data:/var/lib/mysql
    restart: always

  # --- Banco de Dados para o Pharmacy Service ---
  mysql-pharmacy:
    image: mysql:8.0
    container_name: ms-pharmacy-db
    environment:
      MYSQL_DATABASE: ms_pharmacy_db
      MYSQL_USER: mysql_pharmacy_user
      MYSQL_PASSWORD: mysql_pharmacy_password
      MYSQL_ROOT_PASSWORD: root_password_pharmacy
    ports:
      - "3310:3306"
    volumes:
      - pharmacy-mysql-data:/var/lib/mysql
    restart: always

  # --- Banco de Dados para o Media Service ---
  mysql-media:
    image: mysql:8.0
    container_name: ms-media-db
    environment:
      MYSQL_DATABASE: ms_media_db
      MYSQL_USER: mysql_media_user
      MYSQL_PASSWORD: mysql_media_password
      MYSQL_ROOT_PASSWORD: root_password_media
    ports:
      - "3311:3306" # Usando uma nova porta externa
    volumes:
      - media-mysql-data:/var/lib/mysql
    restart: always

volumes:
  user-mysql-data:
  profile-mysql-data:
  appointment-mysql-data:
  pharmacy-mysql-data:
  media-mysql-data: